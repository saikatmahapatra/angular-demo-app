<h1>Manage Tasks</h1>
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">List of Tasks</div>
            <div class="card-body">
                <a [routerLink]="['/project/add-task']" class="btn btn-success mb-3">
                    <app-icon [name]="'add'" [styleClass]="'f-20'"></app-icon>
                    Add New Task
                </a>
                <p-table #dt [value]="dataRow" dataKey="id" [rowHover]="true" styleClass="p-datatable-sm table-font-sm">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 60rem;" pSortableColumn="task_name">
                                <div class="flex justify-content-between align-items-center">
                                    Name
                                    <p-sortIcon field="task_name"></p-sortIcon>
                                </div>
                            </th>
                            <!-- <th style="width: 20rem" pSortableColumn="level">
                                <div class="flex justify-content-between align-items-center">
                                    Type
                                    <p-sortIcon field="level"></p-sortIcon>
                                </div>
                            </th> -->
                            <th style="width: 8rem" pSortableColumn="task_status">
                                <div class="flex justify-content-between align-items-center">
                                    Status
                                    <p-sortIcon field="task_status"></p-sortIcon>
                                </div>
                            </th>
                            <th>Actions</th>
                        </tr>
                    </ng-template>
        
                    <ng-template pTemplate="body" let-rowData let-expanded="expanded">
                        <tr class="p-selectable-row">
                            <td>
                                <span class="p-column-title">Name</span>
                                <span *ngIf="rowData?.level === '2'">{{rowData?.subtask_parent_name}} >
                                </span>{{rowData?.task_name}}
                            </td>
                            <!-- <td>
                                <span class="p-column-title">Type</span>
                                <span *ngIf="rowData?.level === '1' ">Task</span>
                                <span *ngIf="rowData?.level === '2' ">Subtask</span>
                            </td> -->
                           
                            <td>
                                <span class="p-column-title">Status</span>
                                <span *ngIf="rowData?.task_status === 'Y' " class="" title="Active">
                                    <app-icon [name]="'circle'" [styleClass]="'text-success f-14'"></app-icon>
                                </span>
                                <span *ngIf="rowData?.task_status === 'N' " class="" title="Inactive">
                                    <app-icon [name]="'circle'" [styleClass]="'text-warning f-14'"></app-icon>
                                </span>
                            </td>
        
                            <td>
                                <button (click)="editItem(rowData)" pButton pRipple type="button" icon="pi pi-pencil"
                                    class="me-2 p-button-rounded p-button-text p-button-secondary"></button>
                                <!-- <button (click)="deleteItem(rowData)" pButton pRipple type="button" icon="pi pi-trash"
                                    class="p-button-rounded p-button-text p-button-danger"></button> -->
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="3">No records found.</td>
                        </tr>
                    </ng-template>
                </p-table>
        
                <p-paginator [rows]="itemPerPage" [totalRecords]="totalRecords" [rowsPerPageOptions]="itemPerPageDropdown"
                    [showCurrentPageReport]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                    (onPageChange)="paginate($event)"></p-paginator>
            </div> <!--/.card-body-->
        </div> <!--/.card-->
        
    </div>
</div>